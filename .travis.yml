language: rust
cache:
  directories:
    - $HOME/kcov
    - $HOME/android/android-sdk-linux
    - $HOME/android/android-18-arm-linux-androideabi-4.8
matrix:
  fast_finish: true
  allow_failures:
    - rust: nightly
  include:
    # The lines from "# BEGIN GENERATED" through "# END GENERATED" are
    # generated by running |python mk/update-travis-yml.py|. Any changes
    # made to those lines will be overwritten while other lines will be left
    # untouched.
    #
    # BEGIN GENERATED

    - env: TARGET_X=x86_64-apple-darwin  FEATURES_X= MODE_X=DEBUG KCOV=1
      rust: stable
      os: osx
      osx_image: xcode10.1
      addons:
        homebrew:
          packages:
            - bash
            - cmake
            - findutils
            - pkgconfig
            - zlib

    - env: TARGET_X=x86_64-apple-darwin  FEATURES_X= MODE_X=RELWITHDEBINFO KCOV=0
      rust: stable
      os: osx
      osx_image: xcode10.1

    # END GENERATED

script: if [[ "$TARGET_X" =~ ^a*.*linux-.*eabi && "$MODE_X" == "RELWITHDEBINFO" ]]; then travis_wait 60 mk/travis.sh; else mk/travis.sh; fi
